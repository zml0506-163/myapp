# ==================================================
# 环境配置文件模板
# 使用说明：复制此文件为 .env 并修改配置
# ==================================================

# ==================================================
# 数据库配置
# ==================================================
DB_URL=sqlite+aiosqlite:///./pubmed_app.db
# MySQL 示例：
# DB_URL=mysql+aiomysql://root:password@localhost:3306/pubmed_app?charset=utf8mb4

# ==================================================
# 文件存储配置
# ==================================================
PDF_DIR=storage/pdfs
UPLOAD_DIR=./uploads

# ==================================================
# NCBI API 配置
# ==================================================
NCBI_TOOL=test_tool
NCBI_EMAIL=your_email@example.com
# NCBI API Key（可选，有 Key 可以提高请求频率）
NCBI_API_KEY=

# ==================================================
# 通义千问 API 配置
# ==================================================
DASHSCOPE_API_KEY=your_dashscope_api_key_here
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1

# ==================================================
# JWT 配置
# ==================================================
SECRET_KEY=your_secret_key_here_change_in_production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# ==================================================
# 检索配置
# ==================================================

# 目标文献数量（最终返回的文献数）
MAX_SEARCH_RESULTS=5

# PDF 下载超时配置（秒）
PDF_DOWNLOAD_TIMEOUT=60     # 单个 PDF 下载超时
PDF_EXTRACT_TIMEOUT=30      # tar.gz 解压超时
WEBVIEW_TIMEOUT=90          # 浏览器抓取超时

# 检索限制
MAX_PMIDS_TO_FETCH=20       # 每次最多获取的 PMID 数量
MAX_SUCCESSFUL_DOWNLOADS=5  # 成功下载多少个后停止

# 重试配置
PDF_DOWNLOAD_MAX_RETRIES=2  # PDF 下载失败重试次数

# 并发配置
MAX_CONCURRENT_DOWNLOADS=3  # 最大并发下载数（建议 2-5）

# 检索倍数（检索数量 = 目标数量 * 倍数，用于应对下载失败）
SEARCH_MULTIPLIER=3

# ==================================================
# 文件上传限制
# ==================================================
MAX_UPLOAD_SIZE=31457280    # 30MB (单位：字节)

# ==================================================
# CORS 配置
# ==================================================
# 多个域名用逗号分隔
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# ==================================================
# 开发/生产环境标识
# ==================================================
ENVIRONMENT=development     # development | production